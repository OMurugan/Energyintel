{% extends "base.html" %}

{% block title %}World Crude Oil Data - Energy Intelligence{% endblock %}

{% block extra_css %}
<style>
    .wcod-header {
        background: #fff;
        padding: 2rem 0 1rem;
        border-bottom: 1px solid #e0e0e0;
    }
    .wcod-title {
        font-size: 2rem;
        font-weight: 700;
        color: #1a1a1a;
        margin-bottom: 0.5rem;
    }
    .wcod-subtitle {
        font-size: 1rem;
        color: #666;
        margin-bottom: 2rem;
    }
    
    /* Filter & Search Section */
    .filter-search-section {
        background: #fff;
        padding: 1rem 0;
        border-bottom: 1px solid #e0e0e0;
    }
    .filter-search-title {
        font-size: 0.875rem;
        font-weight: 600;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 1rem;
        padding: 0 2rem;
    }
    
    /* Main Tabs */
    .wcod-tabs {
        background: #fff;
        border-bottom: 2px solid #e0e0e0;
        padding: 0;
    }
    .wcod-tabs-list {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        overflow-x: auto;
    }
    .wcod-tabs-list li {
        flex-shrink: 0;
    }
    .wcod-tab-link {
        display: flex;
        align-items: center;
        padding: 12px 24px;
        text-decoration: none;
        color: #2c3e50;
        border-bottom: 3px solid transparent;
        transition: all 0.3s;
        font-weight: 500;
        font-size: 16px;
        white-space: nowrap;
    }
    .wcod-tab-link:hover {
        color: #007bff;
        background-color: #f8f9fa;
    }
    .wcod-tab-link.active {
        color: #007bff;
        border-bottom: 3px solid #007bff;
        font-weight: 600;
        background-color: #f8f9fa;
    }
    .wcod-tab-icon {
        margin-right: 8px;
        font-size: 18px;
    }
    .wcod-tab-separator {
        color: #e0e0e0;
        padding: 0 4px;
        user-select: none;
    }
    
    /* Submenu Section */
    .wcod-submenu {
        background: #fff;
        padding: 20px 30px;
        border-bottom: 1px solid #e0e0e0;
    }
    .wcod-submenu-list {
        display: flex;
        flex-wrap: wrap;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 8px;
    }
    .wcod-submenu-item {
        display: inline-block;
    }
    .wcod-submenu-link {
        display: inline-block;
        padding: 8px 20px;
        text-decoration: none;
        border-radius: 20px;
        border: 1px solid #e0e0e0;
        background: #f8f9fa;
        color: #2c3e50;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s;
        white-space: nowrap;
    }
    .wcod-submenu-link:hover {
        background: #e9ecef;
        border-color: #007bff;
        color: #1b365d;
    }
    .wcod-submenu-link.active {
        background: #1b365d;
        color: #fff;
        border-color: #ffffff;
        font-weight: 600;
    }
    
    /* Content Area */
    .wcod-content {
        background: #f8f9fa;
        min-height: 600px;
        padding: 24px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .wcod-tabs-list {
            flex-wrap: nowrap;
        }
        .wcod-submenu {
            padding: 15px 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="wcod-header">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="wcod-title">WORLD CRUDE OIL DATA</h1>
                <p class="wcod-subtitle">Crude fundamentals, including production, trade, quality and pricing data.</p>
            </div>
        </div>
    </div>
</div>

<!-- Filter & Search Section -->
<div class="filter-search-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="filter-search-title">Filter & Search</div>
            </div>
        </div>
    </div>
</div>

<!-- Main Tabs -->
<div class="wcod-tabs">
    <div class="container-fluid">
        <ul class="wcod-tabs-list">
            <li>
                <a href="/wcod/" class="wcod-tab-link" data-tab="country">
                    <span class="wcod-tab-icon">üåç</span>
                    <span>Country</span>
                </a>
            </li>
            <li><span class="wcod-tab-separator">|</span></li>
            <li>
                <a href="/wcod/crude-overview" class="wcod-tab-link" data-tab="crude">
                    <span class="wcod-tab-icon">üõ¢Ô∏è</span>
                    <span>Crude</span>
                </a>
            </li>
            <li><span class="wcod-tab-separator">|</span></li>
            <li>
                <a href="/wcod/trade/imports-country-detail" class="wcod-tab-link" data-tab="trade">
                    <span class="wcod-tab-icon">üì¶</span>
                    <span>Trade</span>
                </a>
            </li>
            <li><span class="wcod-tab-separator">|</span></li>
            <li>
                <a href="/wcod/prices/global-crude-prices" class="wcod-tab-link" data-tab="prices">
                    <span class="wcod-tab-icon">üí∞</span>
                    <span>Prices</span>
                </a>
            </li>
            <li><span class="wcod-tab-separator">|</span></li>
            <li>
                <a href="/wcod/upstream-projects/projects-by-country" class="wcod-tab-link" data-tab="projects">
                    <span class="wcod-tab-icon">üèóÔ∏è</span>
                    <span>Upstream Projects</span>
                </a>
            </li>
            <li><span class="wcod-tab-separator">|</span></li>
            <li>
                <a href="/wcod-upstream-oil-projects-tracker-methodology" class="wcod-tab-link" data-tab="methodology">
                    <span class="wcod-tab-icon">üìä</span>
                    <span>Methodology</span>
                </a>
            </li>
        </ul>
    </div>
</div>

<!-- Submenu Section -->
<div class="wcod-submenu">
    <div class="container-fluid">
        <ul class="wcod-submenu-list">
            {% block submenu_items %}{% endblock %}
        </ul>
    </div>
</div>

<!-- Content Area -->
<div class="wcod-content">
    <div class="container-fluid">
        {% block wcod_content %}{% endblock %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Update active states based on current URL
    (function() {
        const currentPath = window.location.pathname;
        
        // Determine active tab based on URL patterns
        let activeTab = null;
        if (currentPath === '/wcod' || currentPath === '/wcod/' || currentPath.startsWith('/wcod-country-overview')) {
            activeTab = 'country';
        } else if (currentPath.startsWith('/wcod/crude') || currentPath.startsWith('/wcod-crude')) {
            activeTab = 'crude';
        } else if (currentPath.startsWith('/wcod/trade')) {
            activeTab = 'trade';
        } else if (currentPath.startsWith('/wcod/prices')) {
            activeTab = 'prices';
        } else if (currentPath.startsWith('/wcod/upstream-projects') || currentPath.startsWith('/wcod-upstream-projects')) {
            activeTab = 'projects';
        } else if (currentPath.startsWith('/wcod-upstream-oil-projects-tracker-methodology') || currentPath.startsWith('/wcod-carbon-intensity-methodology')) {
            activeTab = 'methodology';
        }
        
        // Update tab active state
        document.querySelectorAll('.wcod-tab-link').forEach(link => {
            const tab = link.getAttribute('data-tab');
            if (tab === activeTab) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
        
        // Update submenu active state
        document.querySelectorAll('.wcod-submenu-link').forEach(link => {
            const href = link.getAttribute('href');
            const linkPath = href.split('?')[0];
            
            // Normalize paths for comparison
            const normalizePath = (path) => {
                if (path === '/wcod') return '/wcod/';
                return path.endsWith('/') && path !== '/' ? path.slice(0, -1) : path;
            };
            
            const current = normalizePath(currentPath);
            const linkNormalized = normalizePath(linkPath);
            
            if (current === linkNormalized || 
                (linkPath === '/wcod/' && (currentPath === '/wcod' || currentPath === '/wcod/')) ||
                (linkPath !== '/wcod/' && currentPath.startsWith(linkPath))) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    })();
</script>
{% endblock %}

